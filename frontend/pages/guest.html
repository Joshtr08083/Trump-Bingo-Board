<!DOCTYPE html>
<html lang="en">

<!-- This is not a real project, it will not stay up, it was only for a joke. --> 
<head>

    <title>Bingo Board</title>
    <link rel="icon" type="image/x-icon" href="/assets/favicon.ico">
    <link rel="stylesheet" href="/css/guest.css?ver=2.3">
    <link rel="stylesheet" href="/css/main.css?ver=2.3">
</head>
<body>
<div class="wrapper">
    <div style=height:30px></div>

    <div class="title">
        <h1 class="header" style="font-size:60px; text-align:center">TRUMP BINGO BOARD</h1>
    </div>

    <div class="a">
        
        <p class = "text" style = 'text-align:center; text-indent: 0; line-height: 2em;'>In the spirit of BINGO, you must create your<br>own board before you can see other's boards.</p>
        
        <br>

    </div>


    <div class="b">
        <a href="/pages/create-board.html"><button class="button">Create</button></a>
        
        <a href="/pages/login.html"><button class="button">Login</button></a>
    </div>

    <div id="cookieWarning" style="padding-top:5%">
        
    </div>

    <script type="module" src="/scripts/server.js?ver=2.3"></script>
    <script type="module">
        import { getJWT } from '/scripts/server.js?ver=2.3'

        function getCookie(cname) {
            let name = cname + "=";
            let decodedCookie = decodeURIComponent(document.cookie);
            let ca = decodedCookie.split(';');
            for(let i = 0; i <ca.length; i++) {
                let c = ca[i];
                while (c.charAt(0) == ' ') {
                    c = c.substring(1);
                }
                if (c.indexOf(name) == 0) {
                    return c.substring(name.length, c.length);
                }
            }
            return "";

        }

        function testCookies(attempt) {
            if (getCookie("test") == "" && attempt == 1) {
                testCookies(2);
            }

            if (attempt ==  2) {
                const d = new Date();
                d.setTime(d.getTime() + (5184000000));
                let expires = "expires="+ d.toUTCString();
                document.cookie = "test=test;" + expires + ";path=/";

                if (getCookie("test") == "") {
                    document.getElementById("cookieWarning").innerHTML = 
                        '<p class="text" style="color: rgb(153, 33, 33); text-align: center; line-height: 200%">Your log in couldn\'t save because<br>Your browser disabled cookies/site-data for this site<br>Click <a target="_blank" rel="noopener noreferrer" href="http://en.lmgtfy2.com/?q=How+to+allow+a+site+to+save+cookies">HERE<a> to learn how to allow cookies</p>';
                }
            }
            
        }

        document.addEventListener('DOMContentLoaded', async () => {

            const verJWT = await getJWT();
            if (verJWT[0] == true) {
                window.location.href = "/pages/homepage.html"
            }
            else {
                testCookies(1);
            }
        });



    </script>
</div>
</body>
</html>
